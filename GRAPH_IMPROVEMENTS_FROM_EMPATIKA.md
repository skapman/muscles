# üé® –£–ª—É—á—à–µ–Ω–∏—è –ì—Ä–∞—Ñ–∞ –Ω–∞ –û—Å–Ω–æ–≤–µ Empatika.com

## üìä –ê–Ω–∞–ª–∏–∑ –ü–∞—Ç—Ç–µ—Ä–Ω–æ–≤ Empatika.com

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ –ü–∞—Ç—Ç–µ—Ä–Ω—ã:

#### 1. **–¢–µ–º–Ω–∞—è –¢–µ–º–∞**
- ‚úÖ –ß–µ—Ä–Ω—ã–π/—Ç–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω (#0a0a0a, #1a1a1a)
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ —É–∑–ª–æ–≤
- ‚úÖ –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —Å–≤—è–∑–∏ (#ffffff —Å opacity 0.1-0.2)
- ‚úÖ –¢–µ–∫—Å—Ç –±–µ–ª—ã–π/—Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π

#### 2. **–†–∞–∑–º–µ—Ä—ã –£–∑–ª–æ–≤**
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞–∂–Ω–æ—Å—Ç–∏/—Å–≤—è–∑–µ–π
- ‚úÖ –î–∏–∞–ø–∞–∑–æ–Ω: 20px - 80px —Ä–∞–¥–∏—É—Å
- ‚úÖ –§–æ—Ä–º—É–ª–∞: `radius = 20 + (connections * 2)`

#### 3. **–¢–µ–∫—Å—Ç –Ω–∞ –£–∑–ª–∞—Ö**
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä—è–º–æ –Ω–∞ –∫—Ä—É–∂–∫–µ (–Ω–µ –ø–æ–¥ –Ω–∏–º)
- ‚úÖ –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç —Å —Ç–µ–Ω—å—é –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- ‚úÖ –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —É–∑–ª–∞
- ‚úÖ –ü–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π

#### 4. **–¶–≤–µ—Ç–æ–≤–∞—è –°—Ö–µ–º–∞**
```javascript
const empatikColors = {
  'AI –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è': '#ff6b9d',      // –†–æ–∑–æ–≤—ã–π
  '–ü—Ä–æ–¥—É–∫—Ç –∏ —Ä–æ—Å—Ç': '#4ecdc4',          // –ë–∏—Ä—é–∑–æ–≤—ã–π
  '–°–∏—Å—Ç–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è': '#a78bfa',   // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
  '–°—Ç–∞—Ä—Ç–∞–ø—ã': '#ffd93d',                // –ñ–µ–ª—Ç—ã–π
  '–õ–∏–¥–µ—Ä—Å—Ç–≤–æ –∏ –∫–æ–º–∞–Ω–¥–∞': '#95e1d3',     // –ú—è—Ç–Ω—ã–π
  '–ó–Ω–∞–Ω–∏—è –∏ –æ–±—É—á–µ–Ω–∏–µ': '#38b6ff'        // –ì–æ–ª—É–±–æ–π
};
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ü–∞—Ç—Ç–µ—Ä–Ω—ã:

#### 1. **Hover –≠—Ñ—Ñ–µ–∫—Ç**
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —É–∑–ª–∞ –Ω–∞ 10-20%
- ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —É–∑–ª–æ–≤
- ‚úÖ –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –Ω–µ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö —É–∑–ª–æ–≤ (opacity 0.3)
- ‚úÖ –£—Ç–æ–ª—â–µ–Ω–∏–µ —Å–≤—è–∑–µ–π –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —É–∑–ª—É

#### 2. **–ö–ª–∏–∫ –Ω–∞ –£–∑–µ–ª**
- ‚úÖ Tooltip —Ä—è–¥–æ–º —Å —É–∑–ª–æ–º (–Ω–µ bottom sheet)
- ‚úÖ –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤—è–∑–µ–π
- ‚úÖ –°–ø–∏—Å–æ–∫ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —É–∑–ª–æ–≤
- ‚úÖ –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –¥–µ—Ç–∞–ª—è–º–∏ (–Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ)

#### 3. **–ê–Ω–∏–º–∞—Ü–∏–∏**
- ‚úÖ –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —É–∑–ª–æ–≤ (fade-in)
- ‚úÖ –ü—É–ª—å—Å–∞—Ü–∏—è –ø—Ä–∏ hover
- ‚úÖ Smooth transitions –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ Easing: cubic-bezier(0.4, 0, 0.2, 1)

### UI –≠–ª–µ–º–µ–Ω—Ç—ã:

#### 1. **–ü–æ–ª–∑—É–Ω–æ–∫ "–ü–æ—Ä–æ–≥"**
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–≤—è–∑–µ–π
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —É–∑–ª—ã —Å N+ —Å–≤—è–∑—è–º–∏
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞

#### 2. **–õ–µ–≥–µ–Ω–¥–∞**
- ‚úÖ –°–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É
- ‚úÖ –¶–≤–µ—Ç–Ω—ã–µ —Ç–æ—á–∫–∏ + –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ –ö–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è (—Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö

#### 3. **–ü–æ–∏—Å–∫**
- ‚úÖ –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ –≤–≤–µ—Ä—Ö—É —Å–ª–µ–≤–∞
- ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤
- ‚úÖ –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –Ω–∞–π–¥–µ–Ω–Ω–æ–º —É–∑–ª–µ

---

## üöÄ –ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –í–∏–∑—É–∞–ª—å–Ω—ã–µ –£–ª—É—á—à–µ–Ω–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

#### 1.1 –¢–µ–º–Ω–∞—è –¢–µ–º–∞
```css
.relationship-graph-container {
  background: #0a0a0a;
}

.graph-canvas {
  background: #0a0a0a;
}
```

#### 1.2 –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –†–∞–∑–º–µ—Ä—ã –£–∑–ª–æ–≤
```javascript
getNodeRadius(node) {
  const connections = this.graphData.edges.filter(
    e => e.source === node || e.target === node
  ).length;
  return Math.min(20 + connections * 2, 60); // Max 60px
}
```

#### 1.3 –¢–µ–∫—Å—Ç –Ω–∞ –£–∑–ª–∞—Ö
```javascript
// –í–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞ –ø–æ–¥ —É–∑–ª–æ–º
ctx.fillText(label, node.x, node.y + radius + 15);

// –¢–µ–∫—Å—Ç –ù–ê —É–∑–ª–µ
ctx.fillStyle = '#ffffff';
ctx.font = `${radius / 3}px Inter, sans-serif`;
ctx.textAlign = 'center';
ctx.textBaseline = 'middle';
ctx.fillText(label, node.x, node.y);
```

#### 1.4 –£–ª—É—á—à–µ–Ω–Ω—ã–µ –¶–≤–µ—Ç–∞
```javascript
const improvedColors = {
  goals: '#4ecdc4',      // –ë–∏—Ä—é–∑–æ–≤—ã–π (–≤–º–µ—Å—Ç–æ –∑–µ–ª–µ–Ω–æ–≥–æ)
  exercises: '#38b6ff',  // –ì–æ–ª—É–±–æ–π (–≤–º–µ—Å—Ç–æ —Å–∏–Ω–µ–≥–æ)
  muscles: '#ffd93d',    // –ñ–µ–ª—Ç—ã–π (–≤–º–µ—Å—Ç–æ –æ—Ä–∞–Ω–∂–µ–≤–æ–≥–æ)
  pain: '#ff6b9d'        // –†–æ–∑–æ–≤—ã–π (–≤–º–µ—Å—Ç–æ –∫—Ä–∞—Å–Ω–æ–≥–æ)
};
```

### –§–∞–∑–∞ 2: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

#### 2.1 Hover –≠—Ñ—Ñ–µ–∫—Ç
```javascript
canvas.addEventListener('mousemove', (e) => {
  const node = findNodeAtPosition(e.x, e.y);
  if (node) {
    // Highlight connected nodes
    highlightConnectedNodes(node);
    // Show tooltip
    showTooltip(node, e.x, e.y);
  } else {
    clearHighlight();
    hideTooltip();
  }
});
```

#### 2.2 Tooltip –†—è–¥–æ–º —Å –£–∑–ª–æ–º
```javascript
showTooltip(node, x, y) {
  const tooltip = document.getElementById('graph-tooltip');
  tooltip.innerHTML = `
    <div class="tooltip-title">${node.data.title}</div>
    <div class="tooltip-connections">${connections} —Å–≤—è–∑–µ–π</div>
    <div class="tooltip-related">
      ${relatedNodes.map(n => `<div>${n.title}</div>`).join('')}
    </div>
  `;
  tooltip.style.left = `${x + 20}px`;
  tooltip.style.top = `${y}px`;
  tooltip.classList.add('visible');
}
```

#### 2.3 –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –°–≤—è–∑–∞–Ω–Ω—ã—Ö –£–∑–ª–æ–≤
```javascript
highlightConnectedNodes(selectedNode) {
  const connectedIds = new Set();

  this.graphData.edges.forEach(edge => {
    if (edge.source === selectedNode) connectedIds.add(edge.target.id);
    if (edge.target === selectedNode) connectedIds.add(edge.source.id);
  });

  this.graphData.nodes.forEach(node => {
    node.highlighted = node === selectedNode || connectedIds.has(node.id);
    node.dimmed = !node.highlighted;
  });

  this.render();
}
```

### –§–∞–∑–∞ 3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –§–∏—á–∏

#### 3.1 –ü–æ–ª–∑—É–Ω–æ–∫ –ü–æ—Ä–æ–≥–∞
```javascript
createThresholdSlider() {
  const slider = document.createElement('input');
  slider.type = 'range';
  slider.min = '0';
  slider.max = '10';
  slider.value = '0';

  slider.addEventListener('input', (e) => {
    const threshold = parseInt(e.target.value);
    this.filterByConnections(threshold);
  });
}

filterByConnections(minConnections) {
  this.graphData.nodes.forEach(node => {
    const connections = this.graphData.edges.filter(
      e => e.source === node || e.target === node
    ).length;
    node.visible = connections >= minConnections;
  });
  this.render();
}
```

#### 3.2 –ü–æ–∏—Å–∫ –£–∑–ª–æ–≤
```javascript
searchNodes(query) {
  const lowerQuery = query.toLowerCase();
  const found = this.graphData.nodes.filter(node =>
    (node.data.title || '').toLowerCase().includes(lowerQuery)
  );

  if (found.length > 0) {
    this.focusOnNode(found[0]);
    this.highlightConnectedNodes(found[0]);
  }
}
```

---

## üìê –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –¢–µ–º–Ω–∞—è –¢–µ–º–∞ (styles/components/graph.css)
```css
.relationship-graph-container {
  background: #0a0a0a;
}

.graph-canvas {
  background: #0a0a0a;
}

.graph-controls {
  background: rgba(26, 26, 26, 0.95);
  backdrop-filter: blur(10px);
}

.graph-legend {
  background: rgba(26, 26, 26, 0.95);
  backdrop-filter: blur(10px);
  color: #e0e0e0;
}

.depth-label,
.depth-value {
  color: #e0e0e0;
}
```

### 2. –£–ª—É—á—à–µ–Ω–Ω—ã–µ –¶–≤–µ—Ç–∞ (RelationshipGraph.js)
```javascript
getNodeColor(type) {
  const colors = {
    goals: '#4ecdc4',      // –ë–∏—Ä—é–∑–æ–≤—ã–π
    exercises: '#38b6ff',  // –ì–æ–ª—É–±–æ–π
    muscles: '#ffd93d',    // –ñ–µ–ª—Ç—ã–π
    pain: '#ff6b9d'        // –†–æ–∑–æ–≤—ã–π
  };
  return colors[type] || '#999';
}
```

### 3. –¢–µ–∫—Å—Ç –Ω–∞ –£–∑–ª–∞—Ö (render method)
```javascript
// Node label ON the node
ctx.fillStyle = '#ffffff';
ctx.shadowColor = 'rgba(0, 0, 0, 0.8)';
ctx.shadowBlur = 4;
ctx.font = `${Math.max(10, radius / 3)}px Inter, sans-serif`;
ctx.textAlign = 'center';
ctx.textBaseline = 'middle';

// Wrap text if too long
const maxWidth = radius * 1.8;
const words = label.split(' ');
let line = '';
let y = node.y;

words.forEach(word => {
  const testLine = line + word + ' ';
  const metrics = ctx.measureText(testLine);
  if (metrics.width > maxWidth && line !== '') {
    ctx.fillText(line, node.x, y);
    line = word + ' ';
    y += radius / 3;
  } else {
    line = testLine;
  }
});
ctx.fillText(line, node.x, y);
ctx.shadowBlur = 0;
```

### 4. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –†–∞–∑–º–µ—Ä –£–∑–ª–æ–≤
```javascript
getNodeRadius(node) {
  // Count connections
  const connections = this.graphData.edges.filter(edge =>
    edge.source === node || edge.target === node ||
    edge.source.id === node.id || edge.target.id === node.id
  ).length;

  // Base size + connections bonus
  const baseSize = 15;
  const connectionBonus = connections * 2;
  const maxSize = 50;

  return Math.min(baseSize + connectionBonus, maxSize);
}
```

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –°–ø–∏—Å–æ–∫

### –°–¥–µ–ª–∞—Ç—å –°–µ–π—á–∞—Å:
1. ‚úÖ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (—Ñ–æ–Ω, –∫–æ–Ω—Ç—Ä–æ–ª—ã, –ª–µ–≥–µ–Ω–¥–∞)
2. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞ (empatika palette)
3. ‚úÖ –¢–µ–∫—Å—Ç –ù–ê —É–∑–ª–∞—Ö (–Ω–µ –ø–æ–¥ –Ω–∏–º–∏)
4. ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä —É–∑–ª–æ–≤

### –°–¥–µ–ª–∞—Ç—å –ü–æ—Ç–æ–º:
5. ‚è≥ Hover —ç—Ñ—Ñ–µ–∫—Ç —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
6. ‚è≥ Tooltip —Ä—è–¥–æ–º —Å —É–∑–ª–æ–º
7. ‚è≥ –ü–æ–ª–∑—É–Ω–æ–∫ –ø–æ—Ä–æ–≥–∞ —Å–≤—è–∑–µ–π
8. ‚è≥ –ü–æ–∏—Å–∫ —É–∑–ª–æ–≤

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≥—Ä–∞—Ñ –±—É–¥–µ—Ç:
- ‚ú® –í–∏–∑—É–∞–ª—å–Ω–æ –ø–æ—Ö–æ–∂ –Ω–∞ empatika.com
- üé® –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ —Å –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏
- üìä –†–∞–∑–º–µ—Ä —É–∑–ª–æ–≤ –æ—Ç—Ä–∞–∂–∞–µ—Ç –≤–∞–∂–Ω–æ—Å—Ç—å
- üîç –õ–µ–≥–∫–æ —á–∏—Ç–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —É–∑–ª–∞—Ö
- üñ±Ô∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–≤—è–∑–µ–π
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö

**–ù–∞—á–Ω–µ–º —Å –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ + —Ü–≤–µ—Ç–∞ + —Ç–µ–∫—Å—Ç –Ω–∞ —É–∑–ª–∞—Ö)?**
